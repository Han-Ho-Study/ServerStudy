1주차 피드백

DB 락
https://woowaa.net/entry/MSSQL-Lock-%EC%97%90%EB%8C%80%ED%95%9C-%EA%B5%AC%EC%B2%B4%EC%A0%81%EC%A0%95%EB%A6%AC-20130325, https://jeong-pro.tistory.com/241, https://coding-business.tistory.com/32

클러스터드, 넌 클러스터드
https://youtu.be/TRfVeco4wZM?si=2xjyaJlmIafENGd-

스래드
https://hwan-shell.tistory.com/198, https://object-world.tistory.com/23

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Lock
- 멀티 프로세스, 멀티 스레드 환경에서 자원을 동기화 해줌

락의 구현 이론
스핀락
  락을 획득할때까지 스레드를 점유하며 대기함

컨텍스트 스위칭
  락 획득에 실패했으면 다른 스레드에게 자원을 넘김
  
이벤트
  락 획득에 실패했으면 이벤트를 등록하고 다른 스레드에게 자원을 넘기고 이벤트를 기다림

락의 종류
크리티컬 세션
  스핀락과 컨텍스트 스위칭의 중간?
  스레드 단위의 동기화
  
뮤텍스
  프로세스 단위의 동기화
  재귀 뮤텍스
  
세마포어
  뮤텍스 + Lock 가능 갯수를 제한할 수 있음
  
RWLock ( https://megayuchi.com/2017/06/25/srwlock-%EB%B9%A0%EB%A5%B8-%EC%84%B1%EB%8A%A5%EC%9D%98-%EB%B9%84%EA%B2%B0/ )
  Read락 후 Read 가능 Write 불가능
  Write락 후 Read 불가능 Write 불가능

C++ STL에 구현된 락 상세 https://dydtjr1128.github.io/cpp/2020/04/05/Cpp-lock.html
std::mutex
  크리티컬 세션을 사용한 락
  
std::lock_guard
  Scope로 lock, Unlock을 도와줌
  
std::unique_lock
  

락 사용시 문제점
  시리얼 병목
  암달의 법칙
  데드락
    4요소
    감지 방법
  Concurrency Visualizer 확인
    IOCP에서는 이벤트 대기에서 98% 이상을 사용함


고민해봐야 할 것

  메모리 엑세스를 줄이는 방법 << 구체적인 방안, 의미 뜯어보기
  지역변수를 활용?
  객체 관리 방법 - 객체 사용중 다른 스레드에서 지우려고 할때 방지
  락을 관리해주는 스레드는 필요하다(https://kuaaan.tistory.com/99)
  
  컨텐션, 락의 범위 설정
  보통은 객체단위, 호출빈도수에 따라서 전용 락을 만드는 경우도 있었다.



방 생성 입장 삭제를 멀티 스레드, Lock으로 관리해보기
목표, 스레드를 이쁘게 나눠서 성능을 측정시켜 보자 - 정확한 측정을 위해 모든 변수에 voltile 키워드 넣어놓기
유저 입장 -> 방 접속 대기 -> 인원이 차면 방 할당 -> 방 할당 후 유저들 게임 시킴 -> 게임 종료 -> 방 제거 -> 유저 입장으로 돌려보냄 반복
